import 'package:flutter/material.dart';
import 'package:flutter_svg/flutter_svg.dart';

/// The abstract class for FlowySvgData that the code generator will implement
class FlowySvgData {
  /// The svg data
  const FlowySvgData(
    this.path,
  );

  /// The path to the svg data in appflowy assets/images
  final String path;
}

/// For icon that needs to change color when it is on hovered
///
/// Get the hover color from ThemeData
class FlowySvg extends StatelessWidget {
  /// Construct a FlowySvg Widget
  const FlowySvg(
    this.svg, {
    super.key,
    this.size,
    this.color,
  });

  /// The data for the flowy svg. Will be generated by the generator in this
  /// package within bin/flowy_svg.dart
  final FlowySvgData svg;

  /// The size of the svg
  final Size? size;

  /// The color of the svg
  final Color? color;

  @override
  Widget build(BuildContext context) {
    final child = SvgPicture.asset(
      svg.path,
      colorFilter:
          color != null ? ColorFilter.mode(color!, BlendMode.srcIn) : null,
    );

    if (size != null) {
      return SizedBox.fromSize(
        size: size,
        child: child,
      );
    } else {
      return child;
    }
  }
}
